# 全网最适合入门的面向对象编程教程：13 类和对象的 Python 实现-可视化阅读代码神器 Sourcetrail 的安装使用

# 摘要：
本文主要介绍了可视化阅读代码神器Sourcetrail的安装与使用，包括软件简介和特性、下载地址、安装方式、新建工程和如何查看分析源码，同时简单介绍了PyCharm中Sourcetrail插件的使用。
# 原文链接：
[**FreakStudio 的博客**](https://www.cnblogs.com/FreakEmbedded)

# 往期推荐：
[**学嵌入式的你，还不会面向对象？？！**](http://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483825&idx=1&sn=149aaf3baa6a96703713e554d4a888db&chksm=c0b08a82f7c70394074a24b722a1caddb0ad598a7303e61133216ae61423df0b5bc57a6b82b2&scene=21#wechat_redirect "**学嵌入式的你，还不会面向对象？？！**")

[**全网最适合入门的面向对象编程教程：00 面向对象设计方法导论**](https://mp.weixin.qq.com/s/sycnlnMhtFji8q2fYh0MFQ "**全网最适合入门的面向对象编程教程：00 面向对象设计方法导论**")

[**全网最适合入门的面向对象编程教程：01 面向对象编程的基本概念**](http://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483853&idx=1&sn=c7685237216b8dd1cadf95f3353fde8e&chksm=c0b08afef7c703e8ce7b76958718ebe381220a199fac9e872710ea1cb4f8fc6f93d36d151279&scene=21#wechat_redirect "**全网最适合入门的面向对象编程教程：01 面向对象编程的基本概念**")

[**全网最适合入门的面向对象编程教程：02 类和对象的 Python 实现-使用 Python 创建类**](https://mp.weixin.qq.com/s/XKpEAGY9WJ7GRFc98E6dcw)

[**全网最适合入门的面向对象编程教程：03 类和对象的 Python 实现-为自定义类添加属性**](https://mp.weixin.qq.com/s/LsNtLbHLNtVBtiQ3eaJnSg)

[**全网最适合入门的面向对象编程教程：04 类和对象的Python实现-为自定义类添加方法**](https://mp.weixin.qq.com/s/A5rMO3ppTZTUwRPL2NQxdg)

[**全网最适合入门的面向对象编程教程：05 类和对象的Python实现-PyCharm代码标签**](https://mp.weixin.qq.com/s/YjM1JPzLakfyWiDkyy4LQw)

[**全网最适合入门的面向对象编程教程：06 类和对象的Python实现-自定义类的数据封装**](https://mp.weixin.qq.com/s/z7CmgHJXf0QlAgIIRRTXlw)

[**全网最适合入门的面向对象编程教程：07 类和对象的Python实现-类型注解**](https://mp.weixin.qq.com/s/7r4hgM3a187si_D5ReEMCA)

[**全网最适合入门的面向对象编程教程：08 类和对象的Python实现-@property装饰器**](https://mp.weixin.qq.com/s/sSO-L_NQHarXh160xiVZVg)

[**全网最适合入门的面向对象编程教程：09 类和对象的Python实现-类之间的关系**](https://mp.weixin.qq.com/s/cAZzXr9MSL0nVxVcTgNlQA)

[**全网最适合入门的面向对象编程教程：10 类和对象的Python实现-类的继承和里氏替换原则**](https://mp.weixin.qq.com/s/29Lr_nigsMuIJMmWEObk1g)

[**全网最适合入门的面向对象编程教程：11 类和对象的Python实现-子类调用父类方法**](https://mp.weixin.qq.com/s/HEvQNiVXkjlnbhz8Sdt_4Q)

[**全网最适合入门的面向对象编程教程：12 类和对象的Python实现-Python使用logging模块输出程序运行日志**](https://mp.weixin.qq.com/s/QHYLu7Mrs2ErUHvy_k59QA)


# 更多精彩内容可看：
[**给你的 Python 加加速：一文速通 Python 并行计算**](https://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483747&idx=1&sn=0e203586516fd6e925085b9c1244dbee&scene=21#wechat_redirect "**给你的 Python 加加速：一文速通 Python 并行计算**")

[**一文搞懂 CM3 单片机调试原理**](https://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483719&idx=1&sn=7ece9da65d002fdc3df9539cc43f3a8d&scene=21#wechat_redirect "**一文搞懂 CM3 单片机调试原理**")

[**肝了半个月，嵌入式技术栈大汇总出炉**](https://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483671&idx=1&sn=c267a0c6f4ab93d6b6d934bf803b5919&scene=21#wechat_redirect "**肝了半个月，嵌入式技术栈大汇总出炉**")

[**电子计算机类比赛的“武林秘籍”**](https://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483774&idx=1&sn=46d57506febe92c1719c8567ebe95269&scene=21#wechat_redirect "**电子计算机类比赛的“武林秘籍”**")

[**一个MicroPython的开源项目集锦：awesome-micropython，包含各个方面的Micropython工具库**](https://mp.weixin.qq.com/s?__biz=MzkwMTYzNTY3Ng==&mid=2247483854&idx=1&sn=fd666dc501a0de850abfbd8793abff00&chksm=c0b08afdf7c703eb494f8e402a5d60eba9a802bfdb02c07a5e1666a8a1b335e38240adc6c1b5&scene=21#wechat_redirect "**一个MicroPython的开源项目集锦：awesome-micropython，包含各个方面的Micropython工具库**")

# **文档和代码获取：**

可访问如下链接进行对文档下载：

[https://github.com/leezisheng/Doc](https://github.com/leezisheng/Doc)

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240709011450848-2009311855.png)


**本文档主要介绍如何使用 Python 进行面向对象编程，需要读者对 Python 语法和单片机开发具有基本了解。相比其他讲解 Python 面向对象编程的博客或书籍而言，本文档更加详细、侧重于嵌入式上位机应用，以上位机和下位机的常见串口数据收发、数据处理、动态图绘制等为应用实例，同时使用 Sourcetrail 代码软件对代码进行可视化阅读便于读者理解。**

**相关示例代码获取链接如下：**[https://github.com/leezisheng/Python-OOP-Demo](https://github.com/leezisheng/Python-OOP-Demo)


# 正文

这里，我们可以使用 Sourcetrail 软件对代码进行可视化阅读。Sourcetrail 是一个免费开源、跨平台的可视化源码探索项目，可以使用图形直观地表示了调用上游和下游，类成员列表等等细节，使得理解源代码的结构变得很容易。下图是我们用 Sourcetrail 分析示例代码得到的图形化类图，可以很容易的看出 SerialClass 和 SensorClass、MasterClass 间的继承关系以及每个类的方法和属性:

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011637572-269782316.png)





关于 Sourcetrail 的下载安装可以查看：

<u>[https://github.com/CoatiSoftware/Sourcetrail/releases](https://github.com/CoatiSoftware/Sourcetrail/releases)</u>

我们选择 [Sourcetrail_2021_4_19_Windows_64bit_Installer.zip](https://github.com/CoatiSoftware/Sourcetrail/releases/download/2021.4.19/Sourcetrail_2021_4_19_Windows_64bit_Installer.zip) 版本进行下载，下载安装包解压后，可以看到有一个 msi 文件，双击安装即可：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011659573-2061684395.png)


![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011704838-1072706847.png)


如果安装过程中遇到错误代码 2053 提示，查看以下链接解决：

<u>[https://zhuanlan.zhihu.com/p/356008224](https://zhuanlan.zhihu.com/p/356008224)</u>

接下来我们来看如何用 sourcetrail 分析源代码，打开 sourcetrail 软件，首先点击新建工程：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011714808-741153900.png)


接着填写项目名称和需要解析文件的地址：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011721713-1704646836.png)


接着点击添加源码组：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011727950-1576607867.png)


选择 Python 文件，创建空的源码分析组，点击 next：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011733596-1514322381.png)


按照下图所示填写信息即可：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011737990-723484205.png)


这里，使用虚拟环境的同学可以使用 conda env list 获取虚拟环境解释器位置：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011744689-727527555.png)


配置好后点击创建：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011750309-1593865167.png)


开始创建，注意一定要勾选 shallow python index 选项，点击开始：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011755358-86219316.png)


这里，可以看到我们的分析结果，Sourcetrail 将解析结果按“文件”、“模块”等大致分了类，可以极大便利我们阅读他人代码的工作。点击 classes：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011802764-376316771.png)


可以看到我们文件中包含哪些类：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011807635-429101261.png)


点击 SerialClass 类可以看查看属性和方法，右边有对应源码：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011812391-700555120.png)


点击任意方法，可以看到该方法的调用情况：

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011817437-1067132597.png)


项目中的符号都可以点击，支持来回跳转，还支持模糊搜索。左侧源码结构非常清晰，对于熟悉陌生代码结构非常有用。

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011823621-770495721.png)


我们也可以在 Pycharm 中安装插件 idea-sourcetrail 与其配合使用，sourcetrail 支持跟你喜欢的代码编辑器链接，在编辑器中右键，就能激活 sourcetrail 查看上下可视化内容。当然也可以反过来，在 sourcetrail 中点击，直接可以在编辑器中编辑该文件。

![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711011831937-1427883717.png)


点击安装并应用，重启 IDE。具体使用可以参考：

<u>[https://cloud.tencent.com/developer/news/594864](https://cloud.tencent.com/developer/news/594864)</u>

Sourcetrail 还可以与其他编辑器链接，比如： Atom, Clion, Eclipse, Emacs, IntelliJ IDEA 等等。还有更多功能可以参见官方文档：

<u>[https://www.sourcetrail.com/python/](https://www.sourcetrail.com/python/)</u>

实际上这类源码分析工具还有很多，比如 Source Insight 和 Understand。
![image](https://img2024.cnblogs.com/blog/2591203/202407/2591203-20240711012156615-1208313984.png)